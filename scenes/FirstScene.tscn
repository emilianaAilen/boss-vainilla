[gd_scene load_steps=15 format=2]

[ext_resource path="res://assets/textures/oldtv_px.png" type="Texture" id=1]
[ext_resource path="res://scenes/Dialog.tscn" type="PackedScene" id=2]
[ext_resource path="res://scenes/FirstScene.gd" type="Script" id=3]
[ext_resource path="res://assets/audio/news.ogg" type="AudioStream" id=4]
[ext_resource path="res://assets/audio/click-snap-perc.wav" type="AudioStream" id=5]
[ext_resource path="res://assets/audio/telephone-ring-04.wav.sample" type="AudioStream" id=6]
[ext_resource path="res://assets/textures/living_1200x740.png" type="Texture" id=7]
[ext_resource path="res://assets/textures/genericItem_color_064.png" type="Texture" id=8]
[ext_resource path="res://assets/textures/light.png" type="Texture" id=9]
[ext_resource path="res://assets/textures/backgroundBox.png" type="Texture" id=10]

[sub_resource type="Animation" id=2]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("oldPhone:rect_position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector2( 126.343, 237.352 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("oldPhone/Light2D:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1.0 ]
}

[sub_resource type="Animation" id=1]
resource_name = "phone"
length = 0.3
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("oldPhone:rect_position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.152953 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 138.942, 238.612 ), Vector2( 126.343, 237.352 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("oldPhone/Light2D:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0.00171345, 0.153915 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 1.0 ]
}

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;

uniform int pixel_size : hint_range(1, 100) = 1;

void fragment(){
	vec2 pos = UV / TEXTURE_PIXEL_SIZE;
	vec2 square = vec2(float(pixel_size), float(pixel_size));
	vec2 top_left = floor(pos / square) * square;
	vec4 total = vec4(0., 0., 0., 0.);
	for (int x = int(top_left.x); x < int(top_left.x) + pixel_size; x++){
		for (int y = int(top_left.y); y < int(top_left.y) + pixel_size; y++){
			total += texture(TEXTURE, vec2(float(x), float(y)) * TEXTURE_PIXEL_SIZE);
		}
	}
	COLOR = total / float(pixel_size * pixel_size);
}"

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 3 )
shader_param/pixel_size = 1

[node name="FirstScene" type="Control"]
margin_right = 40.0
margin_bottom = 40.0
script = ExtResource( 3 )
__meta__ = {
"_edit_use_anchors_": false
}
phone = ExtResource( 6 )
pressnext = ExtResource( 5 )
news = ExtResource( 4 )

[node name="Background" type="TextureRect" parent="."]
anchor_right = 25.508
anchor_bottom = 14.925
texture = ExtResource( 7 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TextureRect" type="TextureButton" parent="."]
margin_left = 649.318
margin_top = 77.4906
margin_right = 1197.32
margin_bottom = 673.491
texture_normal = ExtResource( 1 )
expand = true
stretch_mode = 4
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Light2D" type="Light2D" parent="TextureRect"]
position = Vector2( 131.968, 259.23 )
scale = Vector2( 0.234478, 0.221557 )
texture = ExtResource( 9 )

[node name="Dialog" parent="." instance=ExtResource( 2 )]
anchor_left = 0.004
anchor_right = 25.704
anchor_bottom = 15.005
margin_left = -0.0173647
margin_top = 7.2153
margin_right = -0.0175781
margin_bottom = 0.0151978

[node name="DialogSfx" type="AudioStreamPlayer2D" parent="."]

[node name="BackgroundSound" type="AudioStreamPlayer" parent="."]
bus = "background"

[node name="oldPhone" type="TextureButton" parent="."]
anchor_left = 3.474
anchor_top = 5.965
anchor_right = 4.424
anchor_bottom = 7.49
margin_left = -12.617
margin_top = -1.248
margin_right = -5.61699
margin_bottom = 0.752014
disabled = true
texture_normal = ExtResource( 8 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Light2D" type="Light2D" parent="oldPhone"]
position = Vector2( 30.6401, 25.3564 )
scale = Vector2( 0.0237444, 0.0212553 )
texture = ExtResource( 9 )
color = Color( 0.117647, 0.984314, 0.0196078, 1 )

[node name="Animation" type="AnimationPlayer" parent="."]
anims/RESET = SubResource( 2 )
anims/phone = SubResource( 1 )

[node name="Timer" type="Timer" parent="."]
wait_time = 3.0

[node name="Background2" type="TextureRect" parent="."]
visible = false
material = SubResource( 4 )
anchor_left = 0.168
anchor_top = -0.176
anchor_right = 25.793
anchor_bottom = 14.924
texture = ExtResource( 10 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TransitionSound" type="AudioStreamPlayer" parent="Background2"]
stream = ExtResource( 6 )

[connection signal="pressed" from="TextureRect" to="." method="_on_Tv_pressed"]
[connection signal="pressed" from="oldPhone" to="." method="_on_oldPhone_pressed"]
[connection signal="timeout" from="Timer" to="." method="_on_timeout"]
[connection signal="finished" from="Background2/TransitionSound" to="." method="_on_TransitionSound_finished"]
